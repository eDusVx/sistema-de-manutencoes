<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Cadastro - My.cars</title>
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>
<!-- ... Seu HTML ... -->

<body class="sb-nav-fixed">
    <!-- ... Seu HTML ... -->
    <div class="vh-100 d-flex align-items-center">
        <main class="container-fluid">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h2 class="text-center mb-4">Cadastro de usuário</h2>
                            <!-- Adicionando um elemento para exibir mensagens de erro -->
                          
                            <form id="loginForm" onsubmit="cadastrarUsuario(event)">
                                <div class="mb-3">
                                    <label for="username" class="form-label">Nome Completo:</label>
                                    <input type="text" class="form-control" id="username" name="username" required>
                                </div>
                                <div class="mb-3">
                                    <label for="cpf" class="form-label">CPF:</label>
                                    <input type="text" class="form-control" id="cpf" name="cpf" required>
                                </div>
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email:</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                <div class="mb-3">
                                    <label for="password" class="form-label">Senha:</label>
                                    <input type="password" class="form-control" id="password" name="password" required>
                                </div>
                                <div id="error-message" class="text-danger mb-3"></div>
                                <button type="submit" class="btn btn-primary btn-block">Cadastrar Usuário</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</body>

<script>
    // script.js

    function cadastrarUsuario(event) {
        event.preventDefault(); // Impede o envio padrão do formulário

        // Obter dados do formulário
        const username = document.getElementById('username').value;
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const cpf = document.getElementById('cpf').value;

        // Construir o objeto de dados a ser enviado para o backend
        const userData = {
            cpf:cpf,
            email: email,
            senha: password,
            nome:username
        };

        // Fazer a chamada Axios para a rota do backend
        axios.post('http://localhost:3000/core/registrar-usuario', userData)
            .then(response => {
                console.log(response.data);
                window.location.href = './login.html';
            })
            .catch(error => {
                console.error(error);
                // Exibir mensagem de erro no elemento error-message
                document.getElementById('error-message').innerText = 'Erro ao cadastrar usuário.';
            });
    }

</script>
